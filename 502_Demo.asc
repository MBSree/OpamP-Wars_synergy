Version 4
SHEET 1 5048 1020
WIRE 288 -288 -32 -288
WIRE 432 -288 288 -288
WIRE 592 -288 432 -288
WIRE -768 -272 -768 -304
WIRE -640 -272 -640 -304
WIRE -448 -272 -448 -304
WIRE -32 -256 -32 -288
WIRE -32 -256 -128 -256
WIRE 288 -240 288 -288
WIRE 352 -240 288 -240
WIRE 592 -240 592 -288
WIRE 672 -240 592 -240
WIRE -32 -224 -32 -256
WIRE 288 -224 288 -240
WIRE -448 -208 -448 -272
WIRE 128 -208 16 -208
WIRE 240 -208 128 -208
WIRE 592 -208 592 -240
WIRE 544 -192 448 -192
WIRE -128 -176 -128 -256
WIRE -32 -176 -128 -176
WIRE 352 -176 352 -240
WIRE 352 -176 288 -176
WIRE 672 -160 672 -240
WIRE 672 -160 592 -160
WIRE -768 -128 -768 -192
WIRE -640 -128 -640 -192
WIRE -32 -128 -32 -144
WIRE -32 -112 -32 -128
WIRE 128 -112 128 -208
WIRE 128 -112 -32 -112
WIRE 288 -112 288 -128
WIRE 384 -112 288 -112
WIRE 448 -112 448 -192
WIRE 448 -112 384 -112
WIRE 448 -80 448 -112
WIRE 592 32 592 -112
WIRE 752 32 592 32
WIRE 880 32 752 32
WIRE 992 32 880 32
WIRE 592 64 592 32
WIRE -32 96 -32 -112
WIRE 288 96 288 -112
WIRE 880 96 880 32
WIRE 752 112 752 32
WIRE 16 144 -32 144
WIRE 288 144 240 144
WIRE -80 176 -224 176
WIRE 416 176 336 176
WIRE 464 176 416 176
WIRE 240 192 240 144
WIRE 288 192 240 192
WIRE -32 208 -32 192
WIRE 16 208 16 144
WIRE 16 208 -32 208
WIRE -448 224 -448 -128
WIRE -352 224 -448 224
WIRE -32 224 -32 208
WIRE 144 224 -32 224
WIRE 288 224 288 192
WIRE 288 224 144 224
WIRE -448 256 -448 224
WIRE 144 256 144 224
WIRE 592 256 592 64
WIRE -448 304 -496 304
WIRE 192 304 144 304
WIRE 624 304 592 304
WIRE -352 336 -352 224
WIRE -352 336 -400 336
WIRE 16 336 -352 336
WIRE 96 336 16 336
WIRE 448 336 384 336
WIRE 544 336 448 336
WIRE 752 336 752 176
WIRE 816 336 752 336
WIRE 880 336 880 176
WIRE 880 336 816 336
WIRE -496 352 -496 304
WIRE -448 352 -496 352
WIRE 192 352 192 304
WIRE 192 352 144 352
WIRE 592 368 592 352
WIRE 624 368 624 304
WIRE 624 368 592 368
WIRE -448 384 -448 352
WIRE 144 416 144 352
WIRE 592 416 592 368
WIRE 816 416 816 336
WIRE -224 592 -224 176
WIRE 160 592 -224 592
WIRE 288 592 240 592
WIRE 336 592 288 592
WIRE 992 592 992 32
WIRE 992 592 416 592
WIRE 288 624 288 592
WIRE 1680 640 1664 640
FLAG 144 416 0
FLAG 592 416 0
FLAG 448 336 Bias
FLAG 16 336 Bias
FLAG 592 64 OUT
FLAG -768 -128 0
FLAG -768 -304 Vdd
FLAG 432 -288 Vdd
FLAG -640 -128 0
FLAG -640 -304 Vref
FLAG 416 176 Vref
FLAG -448 384 0
FLAG -448 -272 Vdd
FLAG 816 416 0
FLAG 384 -112 OTAout
FLAG 288 688 0
DATAFLAG 672 32 "$"
DATAFLAG -80 336 "$"
DATAFLAG 16 224 "$"
DATAFLAG 80 -112 "$"
DATAFLAG 160 -288 "$"
DATAFLAG 288 -16 "$"
SYMBOL voltage -768 -288 R0
WINDOW 3 24 44 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value 5
SYMATTR Value2 AC 0
SYMATTR InstName V1
SYMBOL voltage -640 -288 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 1
SYMATTR Value2 AC 1
SYMBOL current -448 -208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 1m
SYMBOL cap 736 112 R0
WINDOW 3 24 36 Left 2
SYMATTR Value 1n
SYMATTR InstName C2
SYMBOL voltage 144 592 R270
WINDOW 3 24 96 Invisible 2
WINDOW 123 24 48 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value 0
SYMATTR Value2 AC 1
SYMATTR InstName V3
SYMBOL res 432 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1G
SYMBOL cap 272 624 R0
SYMATTR InstName C3
SYMATTR Value 1
SYMBOL nmos4 -80 96 R0
SYMATTR InstName M1
SYMATTR Value2 l=300n w=500n
SYMBOL nmos4 96 256 R0
SYMATTR InstName M2
SYMATTR Value2 l=2000n w=600n
SYMBOL nmos4 544 256 R0
SYMATTR InstName M3
SYMATTR Value2 l=2000n w=600n
SYMBOL nmos4 336 96 M0
SYMATTR InstName M5
SYMATTR Value2 l=300n w=500n
SYMBOL nmos4 -400 256 M0
SYMATTR InstName M6
SYMATTR Value2 l=2000n w=600n
SYMBOL pmos4 544 -112 M180
SYMATTR InstName M4
SYMATTR Value2 l=1n w=2m
SYMBOL pmos4 240 -128 M180
SYMATTR InstName M7
SYMATTR Value2 l=180n w=200n
SYMBOL pmos4 16 -128 R180
SYMATTR InstName M8
SYMATTR Value2 l=180n w=200n
SYMBOL res 864 80 R0
SYMATTR InstName R2
SYMATTR Value 10k
TEXT -800 440 Left 2 !.ac dec 20 10 1G\n;.op
TEXT -800 400 Left 2 !;tran 400u
TEXT 1112 272 Left 2 ;You can also use the middlebrook mthod to find the stability.
TEXT 1120 224 Left 2 ;Please set the parameters in all the .param statements below
TEXT 1112 320 Left 2 ;The method here of breaking the loop and evaluating loop gain works well for a high impedance node, but not always.
TEXT 1112 360 Left 2 ;Middlebrook method is the best way to go. You can find an example in the educational folder of examples in LTspice folder.
TEXT 1120 192 Left 2 ;AC analysis
